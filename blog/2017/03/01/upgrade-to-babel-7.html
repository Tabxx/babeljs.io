<!DOCTYPE html><html lang="zh-CN" class="no-js"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Upgrade to Babel 7 (WIP) | Babel中文网</title><meta name="description" content="EDIT: please refer to the new upgrade page"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" /><link rel="stylesheet" href="/css/main.css?t=2018-09-20T02:07:13+00:00"><link rel="canonical" href="https://babeljs.cn/blog/2017/03/01/upgrade-to-babel-7.html"><link rel="alternate" type="application/rss+xml" title="Babel" href="https://babeljs.cn/feed.xml" /><link rel="icon" href="/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16"><link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"><meta name="og:url" content="https://babeljs.cn"><meta name="og:image" content="website"><meta name="og:title" content="Upgrade to Babel 7 (WIP) | Babel中文网"><meta name="og:description" content="EDIT: please refer to the new upgrade page"><meta name="og:image" content="https://babeljs.cn/images/share-image.png"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@babeljs"><meta name="twitter:title" content="Upgrade to Babel 7 (WIP) | Babel中文网"><meta name="twitter:description" content="EDIT: please refer to the new upgrade page"><meta name="twitter:image:src" content="https://babeljs.cn/images/share-image.png"><meta name="twitter:url" content="https://babeljs.cn/blog/2017/03/01/upgrade-to-babel-7.html"> <script> var _hmt = _hmt || []; (function() { var hm = document.createElement("script"); hm.src = "https://hm.baidu.com/hm.js?7d7e96af885ecd66a8c4ac73dc983681"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s); })(); </script></head><input type="checkbox" id="babel-toggle-search" class="babel-toggle-search-checkbox" /><header class="navbar navbar-default navbar-fixed-top babel-nav" id="top" role="banner"><div class="container"> <a href="/" class="navbar-brand logo">Babel</a><div class="babel-navbar-toggles"><div class="navbar-header"> <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#babel-navbar" aria-controls="babel-navbar" aria-expanded="false"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <label for="babel-toggle-search" class="navbar-toggle babel-toggle-search-open"> <span class="sr-only">Open search</span> <span class="glyphicon glyphicon-search" aria-hidden="true"></span> </label></div></div><nav id="babel-navbar" class="collapse navbar-collapse babel-navbar"><ul class="nav navbar-nav"><li > <a href="/learn-es2015/">学习 ES2015</a></li><li class="dropdown "> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">文档 <span class="caret"></span></a><ul class="dropdown-menu" role="menu"><li > <a href="/docs/setup/">配置</a></li><li > <a href="/docs/editors.html">编辑器</a></li><li > <a href="/docs/usage/caveats/">注意事项</a></li><li > <a href="/docs/community/videos/">视频</a></li><li class="group-name">相关依赖</li><li > <a href="/docs/core-packages/">babel-core</a></li><li > <a href="/docs/usage/polyfill/">babel-polyfill</a></li><li > <a href="/docs/plugins/">Plugins</a></li><li class="group-name">使用方式</li><li > <a href="/docs/usage/babelrc/">.babelrc</a></li><li > <a href="/docs/usage/cli/">babel-cli</a></li><li > <a href="/docs/usage/babel-register/">babel-register</a></li><li > <a href="/docs/usage/api/">API</a></li></ul></li><li > <a href="/repl/">试用</a></li><li class="active"> <a href="/blog/">Blog</a></li><li > <a href="/faq">常见问题</a></li><li > <a href="/team">团队</a></li><li > <a href="https://docschina.org/">印记中文</a></li><li > <a href="https://babel.docschina.org/">Babel V7</a></li></ul><ul class="nav navbar-nav navbar-right nav-social"><li> <a href="https://opencollective.com/babel">赞助</a></li><li> <a href="https://slack.babeljs.io/" title="Join us on Slack"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><rect x="219.27" y="221.3" width="72.04" height="69.58" transform="translate(-67.42 94.64) rotate(-18.52)"/><path d="M489.84,185.3C437,9.29,360.9-31.64,184.9,21.16S-32,150.1,20.76,326.1,149.7,543,325.7,490.24,542.64,361.3,489.84,185.3ZM401,299.5l-33.15,11.05,11.46,34.38c4.5,13.92-2.87,29.06-16.78,33.56-2.87.82-6.14,1.64-9,1.23a27.32,27.32,0,0,1-24.56-18l-11.46-34.38-68.36,22.92,11.46,34.38c4.5,13.92-2.87,29.06-16.78,33.56-2.87.82-6.14,1.64-9,1.23a27.32,27.32,0,0,1-24.56-18L198.81,367l-33.15,11.05c-2.87.82-6.14,1.64-9,1.23a27.32,27.32,0,0,1-24.56-18c-4.5-13.92,2.87-29.06,16.78-33.56L182,316.69l-22.1-65.9-33.15,11.05c-2.87.82-6.14,1.64-9,1.23a27.32,27.32,0,0,1-24.56-18C88.71,231.14,96.08,216,110,211.49l33.15-11.05-11.46-34.38c-4.5-13.92,2.87-29.06,16.78-33.56s29.06,2.87,33.56,16.78l11.46,34.38,68.36-22.92-11.46-34.38c-4.5-13.92,2.87-29.06,16.78-33.56s29.06,2.87,33.56,16.78L312.2,144l33.15-11.05c13.92-4.5,29.06,2.87,33.56,16.78s-2.87,29.06-16.78,33.56L329,194.3l22.1,65.9,33.15-11.05c13.92-4.5,29.06,2.87,33.56,16.78S414.93,295,401,299.5Z" transform="translate(0.7 0.3)"/></svg> </a></li><li> <a href="https://twitter.com/babeljs" title="Follow us on Twitter"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 416.32"><title>twitter</title><path d="M160.83,464.16c193.2,0,298.92-160.22,298.92-298.92,0-4.51,0-9-.2-13.52A214,214,0,0,0,512,97.22a212.93,212.93,0,0,1-60.44,16.6,105.7,105.7,0,0,0,46.3-58.19A209,209,0,0,1,431.07,81a105.09,105.09,0,0,0-181.73,71.91,116.12,116.12,0,0,0,2.66,24c-87.28-4.3-164.73-46.3-216.56-109.82A105.48,105.48,0,0,0,68,207.44a106.27,106.27,0,0,1-47.53-13.11v1.43a105.28,105.28,0,0,0,84.21,103.06,105.67,105.67,0,0,1-47.33,1.84,105.06,105.06,0,0,0,98.14,72.94A210.72,210.72,0,0,1,25,418.68a202.17,202.17,0,0,1-25-1.43,298.85,298.85,0,0,0,160.83,46.92" transform="translate(0 -47.84)" fill="#010101"/></svg> </a></li><li> <a href="https://github.com/babel/babel" title="Contribute on GitHub"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 499.36"><path d="M256,6.32c-141.36,0-256,114.61-256,256,0,113.09,73.34,209,175.08,242.9,12.8,2.35,17.47-5.56,17.47-12.34,0-6.08-.22-22.18-.35-43.54C121,464.83,106,415,106,415c-11.64-29.57-28.42-37.45-28.42-37.45C54.31,361.71,79.31,362,79.31,362c25.69,1.81,39.21,26.38,39.21,26.38,22.84,39.12,59.92,27.82,74.5,21.27,2.33-16.54,8.94-27.82,16.25-34.22C152.43,369,92.67,347,92.67,248.94c0-27.95,10-50.8,26.35-68.69-2.63-6.48-11.42-32.5,2.51-67.75,0,0,21.49-6.88,70.4,26.24a242.65,242.65,0,0,1,128.18,0c48.87-33.13,70.33-26.24,70.33-26.24,14,35.25,5.18,61.27,2.55,67.75,16.41,17.9,26.31,40.75,26.31,68.69,0,98.35-59.85,120-116.88,126.32,9.19,7.9,17.38,23.53,17.38,47.41,0,34.22-.31,61.83-.31,70.23,0,6.85,4.61,14.81,17.6,12.31C438.72,471.29,512,375.4,512,262.34,512,120.94,397.37,6.32,256,6.32Z" transform="translate(0 -6.32)" fill="#191717" fill-rule="evenodd"/></svg> </a></li></ul><label for="babel-toggle-search" class="navbar-toggle babel-toggle-search-open"> <span class="sr-only">打开搜索</span> <span class="glyphicon glyphicon-search" aria-hidden="true"></span> </label><div class="navbar-form navbar-right babel-search" role="search"><div class="input-group"> <label class="sr-only" aria-label="Search" for="babel-search-input">搜索</label><div class="babel-search-input-wrapper"> <input type="text" class="form-control" id="babel-search-input" accesskey="s" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="在文档中搜索..."> <label for="babel-toggle-search" class="babel-toggle-search-close"> <span class="sr-only">关闭搜索</span> <span class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span> </label></div></div></div></nav></div></header><div class="docs-header"><div class="container"><div class="row"><div class="col-md-6 col-md-push-3 text-center"><h1>Upgrade to Babel 7 (WIP)</h1></div></div></div></div><div class="container"><div class="row"><div class="col-md-8 col-md-push-2 babel-blog-content"><p class="small text-center text-muted">Posted Mar 1, 2017 by Sven SAULEAU, Henry Zhu</p><p><a href="http://new.babeljs.io/docs/en/next/v7-migration.html">EDIT: please refer to the new upgrade page</a></p><p>Refer users to this document when upgrading to Babel 7 (currently alpha).</p><p>Because not every breaking change will affect every project, we’ve sorted the sections by the likelihood of a change breaking tests when upgrading.</p><h2 id="all-of-babel">All of Babel</h2><blockquote><p>Support for Node.js 0.10 and 0.12 has been dropped <a href="https://github.com/babel/babel/pull/5025">#5025</a>, <a href="https://github.com/babel/babel/pull/5041">#5041</a>, <a href="https://github.com/babel/babel/pull/5186">#5186</a> <img src="https://img.shields.io/badge/level%20of%20awesomeness%3F-high-red.svg" alt="high" /></p></blockquote><p>We highly encourage you to use a newer version of Node.js (LTS v4, LTS v6) since the previous versions are not maintained. See <a href="https://github.com/nodejs/LTS">nodejs/LTS</a> for more information.</p><blockquote><p>This just means Babel <em>itself</em> won’t run on older versions of Node. It can still <em>output</em> code that runs on old Node.</p></blockquote><h2 id="use-strict-and-this-in-commonjs">“use strict” and ‘this’ in CommonJS</h2><p>Babel 6’s transformations for ES6 modules ran indiscriminantly on whatever files it was told to process, never taking into account if the file actually had ES6 imports/exports in them. This had the effect of rewriting file-scoped references to <code class="highlighter-rouge">this</code> to be <code class="highlighter-rouge">undefined</code> and inserting <code class="highlighter-rouge">"use strict"</code> at the top of all CommonJS modules that were processed by Babel.</p><p>This behavior has been restricted in Babel 7 so that for the <code class="highlighter-rouge">transform-es2015-modules-commonjs</code> transform, the file is only changed if it has ES6 imports or exports in the file. (Editor’s note: This may change again if we land https://github.com/babel/babel/issues/6242, so we’ll want to revisit this before publishing).</p><p>If you were relying on Babel to inject <code class="highlighter-rouge">"use strict"</code> into all of your CommonJS modules automatically, you’ll want to explicitly use the <code class="highlighter-rouge">transform-strict-mode</code> plugin in your Babel config.</p><h2 id="option-parsing">Option parsing</h2><p>Babel’s config options are stricter than in Babel 6. Where a comma-separated list for presets, e.g. <code class="highlighter-rouge">presets: 'es2015,es2016'</code> technically worked before, it will now fail and need to be changed to an array <a href="https://github.com/babel/babel/pull/5463">#5463</a>. This does not apply to the CLI, where <code class="highlighter-rouge">--presets es2015,es2016</code> will certainly still work.</p><h2 id="resolving-string-based-config-values">Resolving string-based config values</h2><p>In Babel 6, values passed to Babel directly (not from a config file), were resolved relative to the files being compiled, which led to lots of confusion. In Babel 7, values are resolved consistently either relative to the config file that loaded them, or relative to the working directory.</p><p>For <code class="highlighter-rouge">presets</code> and <code class="highlighter-rouge">plugins</code> values, this change means that the CLI will behave nicely in cases such as</p><div class="language-bash highlighter-rouge"><pre class="highlight"><code>babel --presets es2015 ../file.js
</code></pre></div><p>Assuming your <code class="highlighter-rouge">node_modules</code> folder is in <code class="highlighter-rouge">.</code>, in Babel 6 this would fail because the preset could not be found.</p><p>This change also affects <code class="highlighter-rouge">only</code> and <code class="highlighter-rouge">ignore</code> which will be expanded on next.</p><h2 id="path-based-only-and-ignore-patterns">Path-based <code class="highlighter-rouge">only</code> and <code class="highlighter-rouge">ignore</code> patterns</h2><p>In Babel 6, <code class="highlighter-rouge">only</code> and <code class="highlighter-rouge">ignore</code> were treated as a general matching string, rather than a filepath glob. This meant that for instance <code class="highlighter-rouge">*.foo.js</code> would match <code class="highlighter-rouge">./**/*.foo.js</code>, which was confusing and surprising to most users.</p><p>In Babel 7, these are now treated as path-based glob patterns which can either be relative or absolute paths. This means that if you were using these patterns, you’ll probably need to at least add a <code class="highlighter-rouge">**/</code> prefix to them now to ensure that your patterns match deeply into directories.</p><p><code class="highlighter-rouge">only</code> and <code class="highlighter-rouge">ignore</code> patterns <em>do</em> still also work for directories, so you could also use <code class="highlighter-rouge">only: './tests'</code> to only compile files in your <code class="highlighter-rouge">tests</code> directory, with no need to use <code class="highlighter-rouge">**/*.js</code> to match all nested files.</p><h2 id="babels-cli-commands">Babel’s CLI commands</h2><p>The <code class="highlighter-rouge">--copy-files</code> argument for the <code class="highlighter-rouge">babel</code> command, which tells Babel to copy all files in a directory that Babel doesn’t know how to handle, will also now copy files that failed an <code class="highlighter-rouge">only</code>/<code class="highlighter-rouge">ignore</code> check, where before it would silently skip all ignored files.</p><h3 id="babel-node"><code class="highlighter-rouge">babel-node</code></h3><p>The <code class="highlighter-rouge">babel-node</code> command in Babel 6 was part of the <code class="highlighter-rouge">babel-cli</code> package. In Babel 7, this command has been split out into its own <code class="highlighter-rouge">babel-node</code> package, so if you are using that command, you’ll want to add this new dependency.</p><h2 id="babel-preset-stage-3">babel-preset-stage-3</h2><blockquote><p>Remove Stage 4 plugins from Stage 3 <a href="https://github.com/babel/babel/pull/5126">#5126</a> <img src="https://img.shields.io/badge/risk%20of%20breakage%3F-high-red.svg" alt="high" /></p></blockquote><p>These plugins were moved into their yearly presets after moving to Stage 4:</p><p><code class="highlighter-rouge">babel-plugin-syntax-trailing-function-commas</code> (<code class="highlighter-rouge">babel-preset-es2017</code>) <code class="highlighter-rouge">babel-plugin-transform-async-to-generator</code> (<code class="highlighter-rouge">babel-preset-es2017</code>) <code class="highlighter-rouge">babel-plugin-transform-exponentiation-operator</code> (babel-preset-es2016)</p><hr /><p>Instead of any yearly preset, we suggest that you use the newly created <code class="highlighter-rouge">babel-preset-env</code> which uses the correct plugins based on your environment.</p><p>Before:</p><div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"presets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"es2015"</span><span class="p">,</span><span class="w"> </span><span class="s2">"es2016"</span><span class="p">,</span><span class="w"> </span><span class="s2">"es2017"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><p>After:</p><div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"presets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"env"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"presets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">[</span><span class="s2">"env"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"targets"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"browsers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"last 2 versions"</span><span class="p">,</span><span class="w"> </span><span class="s2">"safari &gt;= 7"</span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}]</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><p>See <a href="/docs/plugins/preset-env/">/docs/plugins/preset-env/</a> for more information.</p><h2 id="spec-compliancy">Spec Compliancy</h2><blockquote><p>A trailing comma cannot come after a RestElement in objects <a href="https://github.com/babel/babylon/pull/290">#290</a> <img src="https://img.shields.io/badge/risk%20of%20breakage%3F-medium-yellow.svg" alt="medium" /></p></blockquote><p>This is when you are using <code class="highlighter-rouge">babel-plugin-transform-object-rest-spread</code>.</p><p>Before:</p><div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="p">{</span> <span class="p">...</span><span class="nx">y</span><span class="p">,</span> <span class="p">}</span> <span class="o">=</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="mi">1</span><span class="p">};</span>
</code></pre></div><p>This will now throw a syntax error.</p><p>After:</p><div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="p">{</span> <span class="p">...</span><span class="nx">y</span> <span class="p">}</span> <span class="o">=</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="mi">1</span><span class="p">};</span>
</code></pre></div><h2 id="babel-core">babel-core</h2><blockquote><p><code class="highlighter-rouge">babel-core/register.js</code> has been removed <a href="https://github.com/babel/babel/pull/5132">#5132</a> <img src="https://img.shields.io/badge/risk%20of%20breakage%3F-low-yellowgreen.svg" alt="low" /></p></blockquote><p>The deprecated usage of <code class="highlighter-rouge">babel-core/register</code> has been removed in Babel 7; instead use the standalone package <code class="highlighter-rouge">babel-register</code>.</p><p>Install <code class="highlighter-rouge">babel-register</code> as a new dependency:</p><div class="language-sh highlighter-rouge"><pre class="highlight"><code>npm install --save-dev babel-register
</code></pre></div><p>Upgrading with Mocha:</p><div class="language-sh highlighter-rouge"><pre class="highlight"><code>mocha --compilers js:babel-core/register
</code></pre></div><p>to:</p><div class="language-sh highlighter-rouge"><pre class="highlight"><code>mocha --compilers js:babel-register
</code></pre></div><p>See <a href="https://babeljs.io/docs/usage/babel-register/">babel-register documentation</a> for more information.</p><h2 id="babel-plugin-transform-class-constructor-call">babel-plugin-transform-class-constructor-call</h2><blockquote><p>babel-plugin-transform-class-constructor-call has been removed <a href="https://github.com/babel/babel/pull/5119">#5119</a> <img src="https://img.shields.io/badge/risk%20of%20breakage%3F-low-yellowgreen.svg" alt="low" /></p></blockquote><p>TC39 decided to drop this proposal.</p><p>Before:</p><div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kr">class</span> <span class="nx">Point</span> <span class="p">{</span>

  <span class="nx">constructor</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">call</span> <span class="nx">constructor</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">Point</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
  <span class="p">}</span>

<span class="p">}</span>

<span class="kd">let</span> <span class="nx">p1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">p2</span> <span class="o">=</span> <span class="nx">Point</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
</code></pre></div><p>You can move your logic into the constructor or into a static method.</p><p>Example with a static method:</p><div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kr">class</span> <span class="nx">Point</span> <span class="p">{</span>

  <span class="nx">constructor</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kr">static</span> <span class="nx">secondConstructor</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">Point</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
  <span class="p">}</span>

<span class="p">}</span>

<span class="kd">let</span> <span class="nx">p1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">p2</span> <span class="o">=</span> <span class="nx">Point</span><span class="p">.</span><span class="nx">secondConstructor</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
</code></pre></div><p>See <a href="/docs/plugins/transform-class-constructor-call/">/docs/plugins/transform-class-constructor-call/</a> for more information.</p><h2 id="babel-plugin-transform-es2015-template-literals">babel-plugin-transform-es2015-template-literals</h2><blockquote><p>Template Literals Revision updated <a href="https://github.com/babel/babel/pull/5523">#5523</a> <img src="https://img.shields.io/badge/risk%20of%20breakage%3F-low-yellowgreen.svg" alt="low" /></p></blockquote><p>See the proposal for <a href="https://tc39.github.io/proposal-template-literal-revision/">Template Literals Revision</a>.</p><p>It cause Babel 6 to throw <code class="highlighter-rouge">Bad character escape sequence (5:6)</code>.</p><div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">tag</span><span class="err">`\</span><span class="nx">unicode</span> <span class="nx">and</span> <span class="err">\</span><span class="nx">u</span><span class="p">{</span><span class="mi">55</span><span class="p">}</span><span class="err">`</span><span class="p">;</span>
</code></pre></div><p>This has been fixed in Babel 7 and generates something like the following:</p><div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">_taggedTemplateLiteral</span><span class="p">(</span><span class="nx">strings</span><span class="p">,</span> <span class="nx">raw</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">freeze</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperties</span><span class="p">(</span><span class="nx">strings</span><span class="p">,</span> <span class="p">{</span> <span class="na">raw</span><span class="p">:</span> <span class="p">{</span> <span class="na">value</span><span class="p">:</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">freeze</span><span class="p">(</span><span class="nx">raw</span><span class="p">)</span> <span class="p">}</span> <span class="p">}));</span> <span class="p">}</span>
<span class="kd">var</span> <span class="nx">_templateObject</span> <span class="o">=</span> <span class="nx">_taggedTemplateLiteral</span><span class="p">([],</span> <span class="p">[</span><span class="s2">"\\unicode and \\u{55}"</span><span class="p">]);</span>
<span class="nx">tag</span><span class="p">(</span><span class="nx">_templateObject</span><span class="p">);</span>
</code></pre></div><h2 id="babel">babel</h2><blockquote><p>Dropping the <code class="highlighter-rouge">babel</code> package <a href="https://github.com/babel/babel/pull/5293">#5293</a> <img src="https://img.shields.io/badge/risk%20of%20breakage%3F-low-yellowgreen.svg" alt="low" /></p></blockquote><p>This package currently gives you an error message to install <code class="highlighter-rouge">babel-cli</code> instead in v6. We will just not publish a v7 version. It also doesn’t make sense if we switch to scoped package <code class="highlighter-rouge">babel</code> -&gt; <code class="highlighter-rouge">@babel/babel</code>?</p><h2 id="babel-generator">babel-generator</h2><blockquote><p>Dropping the <code class="highlighter-rouge">quotes</code> option <a href="https://github.com/babel/babel/pull/5154">#5154</a>] <img src="https://img.shields.io/badge/risk%20of%20breakage%3F-none-brightgreen.svg" alt="none" /></p></blockquote><p>If you want formatting for compiled output you can use recast/prettier/escodegen/fork babel-generator.</p><p>This option was only available through <code class="highlighter-rouge">babel-generator</code> explicitly until v6.18.0 when we exposed <code class="highlighter-rouge">parserOpts</code> and <code class="highlighter-rouge">generatorOpts</code>. Because there was a bug in that release no one should’ve used this option in Babel itself.</p><blockquote><p>Dropping the <code class="highlighter-rouge">flowUsesCommas</code> option <a href="https://github.com/babel/babel/pull/5123">#5123</a> <img src="https://img.shields.io/badge/risk%20of%20breakage%3F-none-brightgreen.svg" alt="none" /></p></blockquote><p>Currently there are 2 supported syntaxes (<code class="highlighter-rouge">,</code> and <code class="highlighter-rouge">;</code>) in Flow Object Types.</p><p>This change just makes babel-generator output <code class="highlighter-rouge">,</code> instead of <code class="highlighter-rouge">;</code>.</p><h2 id="babel-core-1">babel-core</h2><blockquote><p>Remove <code class="highlighter-rouge">babel-core/src/api/browser.js</code> <a href="https://github.com/babel/babel/pull/5124">#5124</a> <img src="https://img.shields.io/badge/risk%20of%20breakage%3F-none-brightgreen.svg" alt="none" /></p></blockquote><p><code class="highlighter-rouge">babel-browser</code> was already removed in 6.0. If you need to use Babel in the browser or a non-Node environment, use <a href="https://github.com/babel/babel-standalone">babel-standalone</a>.</p></div></div></div><div class="footer text-center"><p><a href="https://github.com/docschina/babeljs.io">Babel中文网</a> · <a href="https://github.com/docschina/babeljs.io/blob/cn/LICENSE">遵循 CC-BY-4.0 许可协议</a> · <a href="https://github.com/babel/babel/blob/master/CODE_OF_CONDUCT.md">代码规范</a></p><p><a href="http://henryzoo.com/babel.github.io/">查看 Babel 5.x 文档?</a> · 发现文档中的问题，提交到 <a href="https://github.com/docschina/babeljs.io/issues/new">这里</a>.</p><p>特别鸣谢 <a href="https://cloud.tencent.com/">腾讯云</a> · <a href="http://www.bootcss.com/">Bootstrap中文网</a> 提供服务和支持</p><br/><p><a href=" " target="_blank">冀ICP备14002930号</a></p></div><script src='https://cdn.bootcss.com/jquery/2.1.3/jquery.min.js' defer></script> <script src='https://cdn.bootcss.com/lodash.js/4.16.3/lodash.min.js' defer></script> <script src='https://cdn.bootcss.com/bootstrap/3.3.1/js/bootstrap.min.js' defer></script> <script src='https://cdn.bootcss.com/clipboard.js/1.5.13/clipboard.min.js' defer></script> <script src='https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js' defer></script> <script src='/scripts/search.js?v=1' defer></script> <script src='/scripts/clipboard.js' defer></script> <script src='/scripts/open-in-repl.js' defer></script> <script> document.addEventListener('DOMContentLoaded', function() { $("html").removeClass("no-js").addClass("js"); }); </script> <script src='https://platform.twitter.com/widgets.js' defer></script> <script src="/scripts/docs.js?t=2018-09-20T02:07:13+00:00" defer></script></body></html>
