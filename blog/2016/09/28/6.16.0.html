<!DOCTYPE html><html lang="zh-CN" class="no-js"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>6.16.0 Released | Babel中文网</title><meta name="description" content="Happy Birthday Babel 🎂 !"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" /><link rel="stylesheet" href="/css/main.css?t=2018-09-20T02:07:13+00:00"><link rel="canonical" href="https://babeljs.cn/blog/2016/09/28/6.16.0.html"><link rel="alternate" type="application/rss+xml" title="Babel" href="https://babeljs.cn/feed.xml" /><link rel="icon" href="/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16"><link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"><meta name="og:url" content="https://babeljs.cn"><meta name="og:image" content="website"><meta name="og:title" content="6.16.0 Released | Babel中文网"><meta name="og:description" content="Happy Birthday Babel 🎂 !"><meta name="og:image" content="https://babeljs.cn/images/share-image.png"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@babeljs"><meta name="twitter:title" content="6.16.0 Released | Babel中文网"><meta name="twitter:description" content="Happy Birthday Babel 🎂 !"><meta name="twitter:image:src" content="https://babeljs.cn/images/share-image.png"><meta name="twitter:url" content="https://babeljs.cn/blog/2016/09/28/6.16.0.html"> <script> var _hmt = _hmt || []; (function() { var hm = document.createElement("script"); hm.src = "https://hm.baidu.com/hm.js?7d7e96af885ecd66a8c4ac73dc983681"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s); })(); </script></head><input type="checkbox" id="babel-toggle-search" class="babel-toggle-search-checkbox" /><header class="navbar navbar-default navbar-fixed-top babel-nav" id="top" role="banner"><div class="container"> <a href="/" class="navbar-brand logo">Babel</a><div class="babel-navbar-toggles"><div class="navbar-header"> <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#babel-navbar" aria-controls="babel-navbar" aria-expanded="false"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <label for="babel-toggle-search" class="navbar-toggle babel-toggle-search-open"> <span class="sr-only">Open search</span> <span class="glyphicon glyphicon-search" aria-hidden="true"></span> </label></div></div><nav id="babel-navbar" class="collapse navbar-collapse babel-navbar"><ul class="nav navbar-nav"><li > <a href="/learn-es2015/">学习 ES2015</a></li><li class="dropdown "> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">文档 <span class="caret"></span></a><ul class="dropdown-menu" role="menu"><li > <a href="/docs/setup/">配置</a></li><li > <a href="/docs/editors.html">编辑器</a></li><li > <a href="/docs/usage/caveats/">注意事项</a></li><li > <a href="/docs/community/videos/">视频</a></li><li class="group-name">相关依赖</li><li > <a href="/docs/core-packages/">babel-core</a></li><li > <a href="/docs/usage/polyfill/">babel-polyfill</a></li><li > <a href="/docs/plugins/">Plugins</a></li><li class="group-name">使用方式</li><li > <a href="/docs/usage/babelrc/">.babelrc</a></li><li > <a href="/docs/usage/cli/">babel-cli</a></li><li > <a href="/docs/usage/babel-register/">babel-register</a></li><li > <a href="/docs/usage/api/">API</a></li></ul></li><li > <a href="/repl/">试用</a></li><li class="active"> <a href="/blog/">Blog</a></li><li > <a href="/faq">常见问题</a></li><li > <a href="/team">团队</a></li><li > <a href="https://docschina.org/">印记中文</a></li><li > <a href="https://babel.docschina.org/">Babel V7</a></li></ul><ul class="nav navbar-nav navbar-right nav-social"><li> <a href="https://opencollective.com/babel">赞助</a></li><li> <a href="https://slack.babeljs.io/" title="Join us on Slack"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><rect x="219.27" y="221.3" width="72.04" height="69.58" transform="translate(-67.42 94.64) rotate(-18.52)"/><path d="M489.84,185.3C437,9.29,360.9-31.64,184.9,21.16S-32,150.1,20.76,326.1,149.7,543,325.7,490.24,542.64,361.3,489.84,185.3ZM401,299.5l-33.15,11.05,11.46,34.38c4.5,13.92-2.87,29.06-16.78,33.56-2.87.82-6.14,1.64-9,1.23a27.32,27.32,0,0,1-24.56-18l-11.46-34.38-68.36,22.92,11.46,34.38c4.5,13.92-2.87,29.06-16.78,33.56-2.87.82-6.14,1.64-9,1.23a27.32,27.32,0,0,1-24.56-18L198.81,367l-33.15,11.05c-2.87.82-6.14,1.64-9,1.23a27.32,27.32,0,0,1-24.56-18c-4.5-13.92,2.87-29.06,16.78-33.56L182,316.69l-22.1-65.9-33.15,11.05c-2.87.82-6.14,1.64-9,1.23a27.32,27.32,0,0,1-24.56-18C88.71,231.14,96.08,216,110,211.49l33.15-11.05-11.46-34.38c-4.5-13.92,2.87-29.06,16.78-33.56s29.06,2.87,33.56,16.78l11.46,34.38,68.36-22.92-11.46-34.38c-4.5-13.92,2.87-29.06,16.78-33.56s29.06,2.87,33.56,16.78L312.2,144l33.15-11.05c13.92-4.5,29.06,2.87,33.56,16.78s-2.87,29.06-16.78,33.56L329,194.3l22.1,65.9,33.15-11.05c13.92-4.5,29.06,2.87,33.56,16.78S414.93,295,401,299.5Z" transform="translate(0.7 0.3)"/></svg> </a></li><li> <a href="https://twitter.com/babeljs" title="Follow us on Twitter"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 416.32"><title>twitter</title><path d="M160.83,464.16c193.2,0,298.92-160.22,298.92-298.92,0-4.51,0-9-.2-13.52A214,214,0,0,0,512,97.22a212.93,212.93,0,0,1-60.44,16.6,105.7,105.7,0,0,0,46.3-58.19A209,209,0,0,1,431.07,81a105.09,105.09,0,0,0-181.73,71.91,116.12,116.12,0,0,0,2.66,24c-87.28-4.3-164.73-46.3-216.56-109.82A105.48,105.48,0,0,0,68,207.44a106.27,106.27,0,0,1-47.53-13.11v1.43a105.28,105.28,0,0,0,84.21,103.06,105.67,105.67,0,0,1-47.33,1.84,105.06,105.06,0,0,0,98.14,72.94A210.72,210.72,0,0,1,25,418.68a202.17,202.17,0,0,1-25-1.43,298.85,298.85,0,0,0,160.83,46.92" transform="translate(0 -47.84)" fill="#010101"/></svg> </a></li><li> <a href="https://github.com/babel/babel" title="Contribute on GitHub"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 499.36"><path d="M256,6.32c-141.36,0-256,114.61-256,256,0,113.09,73.34,209,175.08,242.9,12.8,2.35,17.47-5.56,17.47-12.34,0-6.08-.22-22.18-.35-43.54C121,464.83,106,415,106,415c-11.64-29.57-28.42-37.45-28.42-37.45C54.31,361.71,79.31,362,79.31,362c25.69,1.81,39.21,26.38,39.21,26.38,22.84,39.12,59.92,27.82,74.5,21.27,2.33-16.54,8.94-27.82,16.25-34.22C152.43,369,92.67,347,92.67,248.94c0-27.95,10-50.8,26.35-68.69-2.63-6.48-11.42-32.5,2.51-67.75,0,0,21.49-6.88,70.4,26.24a242.65,242.65,0,0,1,128.18,0c48.87-33.13,70.33-26.24,70.33-26.24,14,35.25,5.18,61.27,2.55,67.75,16.41,17.9,26.31,40.75,26.31,68.69,0,98.35-59.85,120-116.88,126.32,9.19,7.9,17.38,23.53,17.38,47.41,0,34.22-.31,61.83-.31,70.23,0,6.85,4.61,14.81,17.6,12.31C438.72,471.29,512,375.4,512,262.34,512,120.94,397.37,6.32,256,6.32Z" transform="translate(0 -6.32)" fill="#191717" fill-rule="evenodd"/></svg> </a></li></ul><label for="babel-toggle-search" class="navbar-toggle babel-toggle-search-open"> <span class="sr-only">打开搜索</span> <span class="glyphicon glyphicon-search" aria-hidden="true"></span> </label><div class="navbar-form navbar-right babel-search" role="search"><div class="input-group"> <label class="sr-only" aria-label="Search" for="babel-search-input">搜索</label><div class="babel-search-input-wrapper"> <input type="text" class="form-control" id="babel-search-input" accesskey="s" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="在文档中搜索..."> <label for="babel-toggle-search" class="babel-toggle-search-close"> <span class="sr-only">关闭搜索</span> <span class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span> </label></div></div></div></nav></div></header><div class="docs-header"><div class="container"><div class="row"><div class="col-md-6 col-md-push-3 text-center"><h1>6.16.0 Released</h1></div></div></div></div><div class="container"><div class="row"><div class="col-md-8 col-md-push-2 babel-blog-content"><p class="small text-center text-muted">Posted Sep 28, 2016 by <a href="https://twitter.com/left_pad">Henry Zhu</a></p><p style="text-align:center"> Happy Birthday Babel 🎂 !</p><blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">Happy 2nd birthday <a href="https://twitter.com/babeljs">@babeljs</a></p>&mdash; Sebastian McKenzie (@sebmck) <a href="https://twitter.com/sebmck/status/781079584460697601">September 28, 2016</a></blockquote><script async="" src="//platform.twitter.com/widgets.js" charset="utf-8"></script><pre style="font: 10px/5px monospace;">

                                      ```.```           ``````            ``````
                                     ````;````         ```:````          ```:````
                                    ````:;`````       ````;,````        ````;,````
                                   `````::,`````     ````:,:`````      ````:,:`````
                                   ````:,,:`````     ````:.,,````      ````:.,,````
                                   ````:..,.````    ````,,..:`````    ````,,..:`````
                                   ```.,.`,:````    ````:.`.,`````    ````:.`.,`````
                                   ```.,.`.:````    ````:.`.,.````    ````:.`.,.````
                                   ```.,...:````     ``.:...,.```      ``.:...,.```
                                    ::,,,.,,,:`      `:,,,.,,,:,       `:,,,.,,,::
                                   :,,.......,:      :,.......,,,      :,.......,,:
                                   :,.........,  ;++`............;++`  ,.........,:
                                   :.````````.. '+'+'```````````,+'++` ..````````.:
                                   ;,````````.,.+'''',`````````.,''++' ,.````````,:
                                   ;,.`    ``.,++'''',.``    ``.,''''+,,.``    `.,:
                                   :,.``  ```..+''''+,.```  ```.,'''++;,.```  ``.,:
                                  `:,.``  ```..+''''',.```  ```.,''''+',.```  ``.,:
                                  +,..``  ```..+++''+,.```  ```.,+''++;,.```  ``..:,
                                ,:+,.```  ```..++++++,.```  ```.,+++++.,.```  ```.,+,`
                              ,,.'',.```  ```.,`;+++',.```  ```.,+++'.`,.```  ```.,+.,:
                            `,,.`++,.```  ```.,``...`,.```  ```.,...```,.```  ```.,+`..,:
                           ,,..``'+,.```  ```.,``````,.```  ```.,``````,.```  ```.,+```.,:
                          :,.```.,+,.```  ```.,``````,.```  ```.,``````,.```  ```.,'.```..,`
                         :,.`````.,,.```  ```.,``````,.```  ```.,``````,.```  ```.,.``````.,
                        ,,.```````.,.```  ```.,``````,.```  ```.,``````,.```  ```.,```````..:
                        ,.`````````,.```  ```.,``````,.```  ```.,``````,.```  ```.,````````.,:
                       :,.```````` ,.```  ```.,``````,.```  ```.,``````,.```  ```., ````````.,
                       ,.```````.''+'```  ```., `````,.```  ```.,``````,.```  ``,''+'```````.,.
                       ,.```````+'''';``  ```., `````,.```  ``..,``````,.```  ``+'''';```````,:
                       ,.``````'+''''+``` ```.,``````,.``` ```..,``````,.``` ``'+''''+```````.:
                       ,.``````+'''''':`````.., `````,..`````..,,``````,..`````+'''''',``````,:
                       ,.``````+'''''+'.```..,````````,...``..,,````````,...``.+'''''+'`````.,,
                       :.``````+'''''+'......````   ```.......```   `````......+'''''+'`````.,
                       :.`````.+++++'+:.....````.''+' ```....```.''+' ````.....+++++'+:`````.,
                       ,,.````.:+++++'``````````+'''';``````````+'''';`````````,+++++'..````.,
                       .,.````..,;';,.`````````'+''''+ ````````'+''''+ `````````.:';:..`````.:
                        ,.``````....```````````+'''''', `````` +'''''',```````````...```````.:
                        ,.`````````````````````+'''''+'``````` +'''''+'````````````````````.,,
                        ,.`````````````````````+'''''+'````````+'''''+'````````````````````.,.
                        :.`````````````````````+++++'+:``` ````+++++'+:````````````````````.,`
                        :..````````````````````,+++++'```` ````,+++++'`````````````````````.,
                        ,,.`````````````````````.:';,.```   ````.:';,.`````````````````````.,
                        .,.```````````````````````````````   `````````````  ```````````````.:
                        `,.```````````````````` ```````       `````` `    ````````````````..:
                         ,..```````````````````                       ````````````````````.,:
                         ,...`````````````````````` ```        ```````````````````````````.,,
                         :....````````````````````````````````````````````````````````````.,.
                         :,.....`````````````````````````````````````````````````````````..,
                         :,......`````````````````````````````````````````````````````.....:
                         ,,........```````````````````````````````````````````````````.....:
                         .,........```````````````````````````````````````````````````....,:
                          ,..........```````````````````````````````````````````````......,:
                          :...........`````````````````````````````````````````````.......,:
                          :,...........````````````````````````````````````````````.......,,
                          :,..........``````````````````````````````````````````..........,`
                          :,............````````````````````````````````````````..........:
                          :,............````````````````````````````````````````.........,:
                          .,..............```````````````````````````````````............,:
                          `,,..............``````````````````````````````````............,:
                           :,...........`..````````````````````````````````..............,:
                           :,..............````````````````````````````````..............:.
                           ,,,.............```````````````````````````````..............,:
                            :,.............````````````````````````````````............,:,
                            `:,.............````````````````````````````..............,,:
                             .:,............```````````````````````````..............,::
                              .:,,..........````````````````````````````............,::
                                :,,..........````````````````````````.............,,:,
                                 ,:,,.........``````````````````````............,,:;
                                   ::,,........``````````````````.............,,::`
                                     ,::,,........``````.```.``............,,,:;`
                                        :::,,,........`.```............,,,:::.
                                           ,:::,,,,..............,,,,,::::`
                                               `.::::::,,,,,,,::::::,`
</pre><p>It’s hard to believe it’s been 2 years already! Thanks so much to Sebastian for creating this amazing project!</p><p>We’ve grown a lot:</p><ul><li>200+ contributors</li><li>There’s been ~113 releases since 6.0.0 and 512 release total.</li><li>~4.5 million downloads of <code class="highlighter-rouge">babel-core</code> in the last month</li><li>1400+ results for <code class="highlighter-rouge">babel-plugin</code> <a href="https://www.npmjs.com/search?q=babel-plugin">on npm</a></li><li>700+ results for <code class="highlighter-rouge">babel-preset</code> <a href="https://www.npmjs.com/search?q=babel-preset">on npm</a></li><li>4500+ users on our <a href="https://babeljs.slack.com">slack</a></li></ul><p>Thanks so much for using and contributing to our community!</p><p>If you haven’t checked recently, we’ve moved back to <a href="https://github.com/babel/babel/issues">Github Issues</a>! This is all thanks to <a href="https://github.com/danez">@danez</a></p><p>Like most open source projects, Babel is maintained be just a few people working in their free time. We’ll be working on making it easier to contribute in various ways (not just to the main codebase).</p><p>What Evan Czaplicki says in <a href="https://www.youtube.com/watch?list=PLglJM3BYAMPH2zuz1nbKHQyeawE4SN0Cd&amp;v=DSjbTC-hvqQ">Code is the Easy Part</a> is really relevant to any project, big or small. A big part of contributing is just talking, using, writing about the project.</p><p>To that point, we should setup a curated, up-to-date <a href="https://github.com/babel/babel.github.io/issues/27">Resources Page</a> and maybe a newsletter to talk about the awesome stuff people are making with Babel (a new plugin, a new tool, or just an idea).</p><p>Hopefully, we can work more with TC-39 like we do with t<a href="https://github.com/tc39/ecma262#current-proposals">tc39/ecma262#current-proposals</a> and our stage-x presets and plugins. We should look to run <a href="https://github.com/tc39/test262">test262</a> with Babel.</p><p>We’ve also released <a href="https://github.com/babel/babili">Babili, our minifier</a> and started work on <a href="https://github.com/babel/babel-preset-env">babel-preset-env, “autoprefixer” for Babel</a>.</p><p>The future of Babel is bright!</p><h2 id="-spec-compliancy">👓 Spec Compliancy</h2><p><a href="https://github.com/babel/babel/pull/3473">#3473</a> via <a href="https://github.com/babel/babel/pull/4576">#4576</a> Implement support for async generator functions and for-await statements. (<a href="https://github.com/zenparsing">@zenparsing</a>)</p><p>This change implements the <a href="https://github.com/tc39/proposal-async-iteration">async iteration proposal</a>, currently at stage 2 (and is planned to be pushed to stage 3 at the current TC-39 meeting). It includes the following features:</p><ul><li>Transforms async generator functions (<code class="highlighter-rouge">async function* g() { }</code>) to wrapped generator functions, similar to the current async-to-generator transform.</li></ul><div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">async</span> <span class="kd">function</span><span class="o">*</span> <span class="nx">agf</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">await</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">yield</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><ul><li>Transforms <code class="highlighter-rouge">for-await</code> statements into for loops containing yield expressions.</li></ul><div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">async</span> <span class="kd">function</span> <span class="nx">f</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">for</span> <span class="nx">await</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">x</span> <span class="nx">of</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">g</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>Example Usage</p><div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">async</span> <span class="kd">function</span><span class="o">*</span> <span class="nx">genAnswers</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">stream</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="nx">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="mi">9</span><span class="p">),</span> <span class="nx">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="p">];</span>
  <span class="kd">var</span> <span class="nx">total</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">for</span> <span class="nx">await</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">val</span> <span class="nx">of</span> <span class="nx">stream</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">total</span> <span class="o">+=</span> <span class="nx">await</span> <span class="nx">val</span><span class="p">;</span>
    <span class="k">yield</span> <span class="nx">total</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">forEach</span><span class="p">(</span><span class="nx">ai</span><span class="p">,</span> <span class="nx">fn</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">ai</span><span class="p">.</span><span class="nx">next</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">r</span><span class="p">.</span><span class="nx">done</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">fn</span><span class="p">(</span><span class="nx">r</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">forEach</span><span class="p">(</span><span class="nx">ai</span><span class="p">,</span> <span class="nx">fn</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">output</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">return</span> <span class="nx">forEach</span><span class="p">(</span><span class="nx">genAnswers</span><span class="p">(),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span> <span class="nx">output</span> <span class="o">+=</span> <span class="nx">val</span><span class="p">.</span><span class="nx">value</span> <span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">output</span><span class="p">,</span> <span class="mi">42</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div><p><a href="https://github.com/babel/babel/pull/4500">#4500</a> Support computed class properties. (<a href="https://github.com/motiz88">@motiz88</a>)</p><p>Parser support was added in <a href="https://github.com/babel/babylon/releases/tag/v6.11.0">babylon@6.11.0</a> with <a href="https://github.com/babel/babylon/pull/121">babel/babylon#121</a></p><div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="c1">// Example</span>
<span class="kr">class</span> <span class="nx">Foo</span> <span class="p">{</span>
  <span class="p">[</span><span class="nx">x</span><span class="p">]</span>
  <span class="p">[</span><span class="s1">'y'</span><span class="p">]</span>
<span class="p">}</span>

<span class="kr">class</span> <span class="nx">Bar</span> <span class="p">{</span>
  <span class="p">[</span><span class="nx">p</span><span class="p">]</span>
  <span class="p">[</span><span class="nx">m</span><span class="p">]</span> <span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>
</code></pre></div><p><a href="https://github.com/babel/babel/pull/3702">#3702</a> Flow: generate exact object type annotations. (<a href="https://github.com/bhosmer">@bhosmer</a>)</p><p>Parser support was added in <a href="https://github.com/babel/babylon/releases/tag/v6.10.0">babylon@6.10.0</a> with <a href="https://github.com/babel/babylon/pull/104">babel/babylon#104</a></p><div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="c1">// Example</span>
<span class="kd">var</span> <span class="nx">a</span> <span class="err">:</span> <span class="p">{</span><span class="o">|</span> <span class="nx">x</span><span class="err">:</span> <span class="nx">number</span><span class="p">,</span> <span class="nx">y</span><span class="err">:</span> <span class="nx">string</span> <span class="o">|</span><span class="p">}</span> <span class="o">=</span> <span class="p">{</span> <span class="na">x</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="s1">'foo'</span> <span class="p">};</span>
</code></pre></div><h2 id="-new-feature">🚀 New Feature</h2><p><a href="https://github.com/babel/babel/pull/3561">#3561</a> <code class="highlighter-rouge">babel-core</code>: add options for a different parser or generator. (<a href="https://github.com/hzoo">@hzoo</a>)</p><p>Babel will now also take the options: <code class="highlighter-rouge">parserOpts</code> and <code class="highlighter-rouge">generatorOpts</code> (as objects).</p><p><code class="highlighter-rouge">parserOpts</code> will pass all properties down to the default <code class="highlighter-rouge">babylon</code> parser. You can also pass a <code class="highlighter-rouge">parser</code> option to substitute for a different parser.</p><p>This will allow passing down any of <code class="highlighter-rouge">babylon's</code> <a href="https://github.com/babel/babylon#options">options</a>:</p><div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="p">{</span>
  <span class="s2">"parserOpts"</span><span class="err">:</span> <span class="p">{</span>
    <span class="s2">"allowImportExportEverywhere"</span><span class="err">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">"allowReturnOutsideFunction"</span><span class="err">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">"sourceType"</span><span class="err">:</span> <span class="s2">"module"</span><span class="p">,</span>
    <span class="s2">"plugins"</span><span class="err">:</span> <span class="p">[</span><span class="s2">"flow"</span><span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>You can also pass down <code class="highlighter-rouge">parserOpts.parser</code> and <code class="highlighter-rouge">generatorOpts.generator</code>. This will enable the use of <a href="https://github.com/benjamn/recast">recast</a> with Babel.</p><p>Recast is used in <a href="https://github.com/facebook/jscodeshift">jscodeshift</a> which is a tool to create <a href="https://medium.com/@cpojer/effective-javascript-codemods-5a6686bb46fb#.kef4rnxpd">codemods</a>. You might know of these since the React team also <a href="https://github.com/reactjs/react-codemod/">publishes them</a> to help convert between React releases.</p><p><img src="https://cloud.githubusercontent.com/assets/588473/16584612/04a82078-428b-11e6-9f79-a665eef848ea.gif" alt="recast" /></p><div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"parserOpts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"parser"</span><span class="p">:</span><span class="w"> </span><span class="s2">"recast"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"generatorOpts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"generator"</span><span class="p">:</span><span class="w"> </span><span class="s2">"recast"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><p>Babel as a compiler has 3 steps: parsing, transforming, and generation.</p><p>At a high level, the process is:</p><ul><li>parsing: take a string (input code) and turn it into JSON.</li><li>transforming (plugins): take JSON and make a different JSON structure)</li><li>code generation: turn the JSON back into a string (output code).</li></ul><p>The last step of babel is the code generator. Traditionally, the code generator doesn’t really need to care about the format of your code (spaces, quotes, etc). This is because the output code is your “compiled” code and will probably go in the dist directory, you will eventually minify it, etc.</p><p>But what if you want to write a babel plugin that runs on your source code and outputs to source (<code class="highlighter-rouge">babel src -d src</code> rather than <code class="highlighter-rouge">babel src -d lib</code>)? You would want your diff to be readable and for the plugin to only modify what is necessary by conforming to your style guide.</p><p>This is because you want to write a plugin that transforms the source itself. One use case is a project called <a href="https://github.com/mohebifar/lebab">lebab</a> which is actually just the opposite of babel (used to be called 5to6). Currently, <a href="https://github.com/mohebifar/lebab/issues/138">it isn’t a babel plugin</a> so we wanted to help support that usecase.</p><p>Once <a href="https://github.com/benjamn/recast/pull/299">benjamn/recast#299</a> and <a href="https://github.com/benjamn/ast-types/pull/162">benjamn/ast-types#162</a> are merged you should be able to make your own codemods with Babel as well!</p><p><a href="https://github.com/babel/babel/pull/4542">#4542</a> Add support for preset organization shortcuts. (<a href="https://github.com/nkt">@nkt</a>)</p><div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="p">{</span>
  <span class="nl">presets</span><span class="p">:</span> <span class="p">[</span><span class="s2">"@org/babel-preset-name"</span><span class="p">],</span> <span class="c1">// actual package</span>
  <span class="nx">presets</span><span class="err">:</span> <span class="p">[</span><span class="s2">"@org/name"</span><span class="p">]</span> <span class="c1">// shorthand name</span>
<span class="p">}</span>
</code></pre></div><p><a href="https://github.com/babel/babel/pull/4491">#4491</a> Add object rest spread <code class="highlighter-rouge">useBuiltIns</code> option. (<a href="https://github.com/hzoo">@hzoo</a>)</p><p><code class="highlighter-rouge">useBuiltIns</code> - Do not use Babel’s helper’s and just transform to use the built-in method (Disabled by default).</p><div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="p">{</span>
  <span class="s2">"plugins"</span><span class="err">:</span> <span class="p">[</span>
    <span class="p">[</span><span class="s2">"transform-object-rest-spread"</span><span class="p">,</span> <span class="p">{</span> <span class="s2">"useBuiltIns"</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}]</span>
  <span class="p">]</span>
<span class="p">}</span>

<span class="c1">// source</span>
<span class="nx">z</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">x</span><span class="p">,</span> <span class="p">...</span><span class="nx">y</span> <span class="p">};</span>
<span class="c1">// compiled</span>
<span class="nx">z</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">({</span> <span class="nx">x</span> <span class="p">},</span> <span class="nx">y</span><span class="p">);</span>
</code></pre></div><p><a href="https://github.com/babel/babel/pull/4561">#4561</a> <code class="highlighter-rouge">babel-code-frame</code>: add options for <code class="highlighter-rouge">linesBefore</code>, <code class="highlighter-rouge">linesAfter</code>. (<a href="https://github.com/hzoo">@hzoo</a>)</p><p><code class="highlighter-rouge">babel-code-frame</code> is a standalone package that we use in Babel when reporting errors.</p><p>Now there is an <a href="https://github.com/babel/babel/blob/master/packages/babel-code-frame/README.md#options">option</a> to specify the number of lines above and below the error</p><div class="language-js highlighter-rouge"><pre class="highlight"><code>  <span class="mi">1</span> <span class="o">|</span> <span class="kr">class</span> <span class="nx">Foo</span> <span class="p">{</span>
<span class="o">&gt;</span> <span class="mi">2</span> <span class="o">|</span>   <span class="nx">constructor</span><span class="p">()</span>
    <span class="o">|</span>                <span class="o">^</span>
  <span class="mi">3</span> <span class="o">|</span> <span class="p">}</span>
</code></pre></div><p><a href="https://github.com/babel/babel/pull/#3695">#3695</a> via <a href="https://github.com/babel/babel/pull/4566">#4566</a> Allow presets to be ES6 default exports (<a href="https://github.com/johanssj">@johanssj</a>)</p><p>We previously made presets with commonjs exports</p><div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">plugins</span><span class="p">:</span> <span class="p">[</span>
    <span class="nx">require</span><span class="p">(</span><span class="s2">"babel-plugin-syntax-trailing-function-commas"</span><span class="p">)</span>
  <span class="p">]</span>
<span class="p">};</span>
</code></pre></div><p>Now you can use export default as well</p><div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kr">import</span> <span class="nx">syntaxTrailingCommas</span> <span class="nx">from</span> <span class="s2">"..."</span><span class="p">;</span>
<span class="kr">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="na">plugins</span><span class="p">:</span> <span class="p">[</span>
    <span class="nx">syntaxTrailingCommas</span>
  <span class="p">]</span>
<span class="p">};</span>
</code></pre></div><h2 id="-polish">💅 Polish</h2><p><a href="https://github.com/babel/babel/pull/4572">#4572</a>, <a href="https://github.com/babel/babel/pull/4579">#4579</a> Improve syntax highlighting colors. (<a href="https://github.com/lydell">@lydell</a>)</p><p>Before</p><p><img width="611" alt="screen shot 2016-09-27 at 11 12 47 am" src="https://cloud.githubusercontent.com/assets/588473/18879735/6ba2820a-84a3-11e6-9e3f-fa8612620867.png" /></p><p>After</p><p><img width="611" alt="screen shot 2016-09-27 at 3 50 02 pm" src="https://cloud.githubusercontent.com/assets/588473/18889266/38829f96-84ca-11e6-8a19-0a39e440a0d3.png" /></p><h2 id="-notable-bug-fixes">🐛 Notable Bug Fixes</h2><p><a href="https://github.com/babel/babel/pull/3686">#3686</a> Fix <code class="highlighter-rouge">typeof Symbol.prototype</code>. (<a href="https://github.com/brainlock">@brainlock</a>)</p><div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="c1">// `typeof Symbol.prototype` should be 'object'</span>
<span class="k">typeof</span> <span class="nx">Symbol</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">===</span> <span class="s1">'object'</span>
</code></pre></div><p><a href="https://github.com/babel/babel/pull/4507">#4507</a> Only set options in <code class="highlighter-rouge">babel-cli</code> if different from default. (<a href="https://github.com/danez">@danez</a>)</p><p>Fix an issue with defaults not being overidden. This was causing options like <code class="highlighter-rouge">comments: false</code> not to work correctly.</p><p><a href="https://github.com/babel/babel/pull/4524">#4524</a> Fix default export with arrows and function naming. (<a href="https://github.com/danharper">@danharper</a>)</p><div class="highlighter-rouge"><pre class="highlight"><code>// this wasn't exporting correctly before
export default ({ onClick }) =&gt; {
  return &lt;div onClick={() =&gt; onClick()}&gt;&lt;/div&gt;;
}
</code></pre></div><p><a href="https://github.com/babel/babel/pull/4518">#4518</a> Fix default exported classes without a name. (<a href="https://github.com/danez">@danez</a>)</p><div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kr">export</span> <span class="k">default</span> <span class="kr">class</span> <span class="p">{};</span>
<span class="c1">// wasn't correctly transforming to</span>
<span class="nx">exports</span><span class="p">[</span><span class="s2">"default"</span><span class="p">]</span> <span class="o">=</span> <span class="kr">class</span> <span class="p">{}</span>
<span class="c1">// with the es3-tranforms</span>
</code></pre></div><p><a href="https://github.com/babel/babel/pull/4521">#4521</a> Fix striping of <code class="highlighter-rouge">typeParameters</code> from arrow functions. (<a href="https://github.com/danez">@danez</a>)</p><div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="c1">// &lt;X&gt; wasn't stripped out</span>
<span class="kr">const</span> <span class="nx">find</span> <span class="o">=</span> <span class="o">&lt;</span><span class="nx">X</span><span class="o">&gt;</span> <span class="p">(</span><span class="nx">f</span><span class="err">:</span> <span class="p">(</span><span class="nx">x</span><span class="err">:</span><span class="nx">X</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">X</span><span class="p">,</span> <span class="nx">xs</span><span class="err">:</span> <span class="nb">Array</span><span class="o">&lt;</span><span class="nx">X</span><span class="o">&gt;</span><span class="p">)</span><span class="err">:</span> <span class="p">?</span><span class="nx">X</span> <span class="o">=&gt;</span> <span class="p">(</span>
  <span class="nx">xs</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(((</span><span class="nx">b</span><span class="p">,</span> <span class="nx">x</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">b</span> <span class="p">?</span> <span class="nx">b</span> <span class="p">:</span> <span class="nx">f</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">?</span> <span class="nx">x</span> <span class="p">:</span> <span class="kc">null</span><span class="p">),</span> <span class="kc">null</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div><p><a href="https://github.com/babel/babel/pull/4552">#4552</a> Fix destructuring evaluation with call expressions. (<a href="https://github.com/danez">@danez</a>)</p><p>We noticed that we can not make this optimizations if there are function calls or member expressions on the right hand side of the assignment since the function call or the member expression (which might be a getter with side-effect) could potentially change the variables we are assigning to.</p><div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="p">[</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nx">a</span><span class="p">(),</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">x</span><span class="p">];</span>
<span class="c1">// was tranforming to</span>
<span class="nx">x</span> <span class="o">=</span> <span class="nx">a</span><span class="p">();</span>
<span class="nx">y</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
<span class="c1">// now transforms to</span>
<span class="kd">var</span> <span class="nx">_ref</span> <span class="o">=</span> <span class="p">[</span><span class="nx">a</span><span class="p">(),</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">x</span><span class="p">];</span>
<span class="nx">x</span> <span class="o">=</span> <span class="nx">_ref</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="nx">y</span> <span class="o">=</span> <span class="nx">_ref</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
</code></pre></div><p><a href="https://github.com/babel/babel/pull/4587">#4587</a> Prevent flow-strip-types/flow-comments from removing entire ClassProperty. (<a href="https://github.com/danharper">@danharper</a>)</p><hr /><p>Check out <a href="https://github.com/babel/babel/releases/tag/v6.16.0">Github</a> for the rest of the changelog!</p></div></div></div><div class="footer text-center"><p><a href="https://github.com/docschina/babeljs.io">Babel中文网</a> · <a href="https://github.com/docschina/babeljs.io/blob/cn/LICENSE">遵循 CC-BY-4.0 许可协议</a> · <a href="https://github.com/babel/babel/blob/master/CODE_OF_CONDUCT.md">代码规范</a></p><p><a href="http://henryzoo.com/babel.github.io/">查看 Babel 5.x 文档?</a> · 发现文档中的问题，提交到 <a href="https://github.com/docschina/babeljs.io/issues/new">这里</a>.</p><p>特别鸣谢 <a href="https://cloud.tencent.com/">腾讯云</a> · <a href="http://www.bootcss.com/">Bootstrap中文网</a> 提供服务和支持</p><br/><p><a href=" " target="_blank">冀ICP备14002930号</a></p></div><script src='https://cdn.bootcss.com/jquery/2.1.3/jquery.min.js' defer></script> <script src='https://cdn.bootcss.com/lodash.js/4.16.3/lodash.min.js' defer></script> <script src='https://cdn.bootcss.com/bootstrap/3.3.1/js/bootstrap.min.js' defer></script> <script src='https://cdn.bootcss.com/clipboard.js/1.5.13/clipboard.min.js' defer></script> <script src='https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js' defer></script> <script src='/scripts/search.js?v=1' defer></script> <script src='/scripts/clipboard.js' defer></script> <script src='/scripts/open-in-repl.js' defer></script> <script> document.addEventListener('DOMContentLoaded', function() { $("html").removeClass("no-js").addClass("js"); }); </script></body></html>
